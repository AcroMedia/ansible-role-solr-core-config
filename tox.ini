[tox]
minversion = 3.7
envlist = py{3}-ansible{29}-{   latest,7.x,7.4.0    }

skipsdist = true

[base]
passenv = *
deps =
    -rrequirements.txt
;    ansible28: ansible==2.8
    ansible29: ansible==2.9
;    ansiblelatest: ansible

commands = molecule test
setenv =
    TOX_ENVNAME={envname}
    MOLECULE_EPHEMERAL_DIRECTORY=/tmp/{envname}

[testenv]
passenv = {[base]passenv}
deps = {[base]deps}
commands = {[base]commands}
setenv =
    latest:         TAG=latest
    7.x:            TAG=7.x
    7.4.0           TAG=7.4.0
    {[base]setenv}